# Copyright 2019 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

# Zircon manifests
#
# This file contains references to binaries either built by the Zircon GN build
# (`legacy-foo` targets) or migrated from that build into the Fuchsia GN build
# (`migrated-foo` targets).

import("aggregate_manifest.gni")
import("artifacts.gni")
import("common_image_contents.gni")
import("zircon_artifact.gni")
import("//build/unification/future/data/fini_manifest.gni")

foreach(artifact, zircon_artifacts) {
  zircon_artifact(artifact.name) {
    contents = artifact.lines

    deps = artifact.deps
  }
}

group("images") {
  deps = [
    ":legacy-aux",
    ":legacy-image",
    ":legacy-tests",
    ":migrated-aux",
    ":migrated-image",
    ":migrated-tests",
  ]
}

###############################################################################
# Legacy manifests
#
# These manifests mirror the manifests generated by the ZN build.
#
# Edit these targets if:
#  - a new binary was recently added to the ZN build and needs to be referred
#    to in the GN build - the edit is an addition;
#  - a binary is being migrated from the ZN build into the GN build - the edit
#    should be a removal.

aggregate_manifest("legacy-image") {
  # Though without any dependency, this target is being kept around as its
  # output is needed by support scripts.
  deps = []
}

# IMPORTANT NOTE: this target is now frozen, please do not add any more
# dependencies to it.
aggregate_manifest("legacy-aux") {
  deps = [
    ":lib.c",
    ":test.sys.libc-test",
    ":test.sys.noop-test",
    ":test.sys.noop-test.asan",
    ":test.sys.noop-test.asan-ubsan",
    ":test.sys.noop-test.profile",
    ":test.sys.noop-test.sancov",
    ":test.sys.noop-test.ubsan",
    ":test.sys.noop-test.ubsan-sancov",
    ":test.sys.noop-test.ubsan-sancov-full",
  ]

  reference = "legacy-aux-$target_cpu"
}

# IMPORTANT NOTE: this target is now frozen, please do not add any more
# dependencies to it.
aggregate_manifest("legacy-tests") {
  deps = [
    ":test.sys.libc-test",
    ":test.sys.noop-test",
    ":test.sys.noop-test.asan",
    ":test.sys.noop-test.asan-ubsan",
    ":test.sys.noop-test.profile",
    ":test.sys.noop-test.sancov",
    ":test.sys.noop-test.ubsan",
    ":test.sys.noop-test.ubsan-sancov",
    ":test.sys.noop-test.ubsan-sancov-full",
  ]

  reference = "legacy-tests-$target_cpu"
}

###############################################################################
# Migrated manifests
#
# These manifests list binaries that were migrated from the ZN build into the
# GN build.
#
# Edit these targets if:
#  - a binary is being migrated from the ZN build into the GN build - the edit
#    should be an addition;
#  - a formerly migrated binary is being better integrated into the GN build
#    using idiomatic constructs - the edit should be a removal.

fini_manifest("migrated-image") {
  # Use the same naming scheme as `aggregate_manifest`.
  outputs = [ "$target_out_dir/$target_name.unification.manifest" ]

  # See common_contents.gni to edit the contents of this manifest.
  deps = common_image_contents
}

fini_manifest("migrated-aux") {
  # Use the same naming scheme as `aggregate_manifest`.
  outputs = [ "$target_out_dir/$target_name.unification.manifest" ]

  deps = [
    "//src/connectivity/ethernet/drivers/usb-cdc-ecm:usb-cdc-ecm-unittest",
    "//src/devices/block/bin/biotime:biotime-test",
    "//src/devices/block/drivers/ahci:ahci-unittest",
    "//src/devices/block/drivers/core:core-unittest",
    "//src/devices/block/drivers/gpt:gpt-device-test",
    "//src/devices/block/drivers/mbr:mbr-test",
    "//src/devices/board/drivers/mt8167s_ref:mt8167s_ref-test",
    "//src/devices/bus/drivers/pci/test:pci-driver",
    "//src/devices/bus/lib/device-protocol-pdev/test:device-protocol-pdev-test",
    "//src/devices/clock/drivers/amlogic-clk:amlogic-clk-test",
    "//src/devices/clock/drivers/msm8x53-clk:msm8x53-clk-test",
    "//src/devices/cpu/drivers/aml-cpu:aml-cpu-test",
    "//src/devices/gpio/drivers/aml-axg-gpio:aml-axg-gpio-test",
    "//src/devices/lib/as370/test:audio-dsp-test",
    "//src/devices/lib/as370/test:syn-audio-in-test",
    "//src/devices/lib/mt8167/test:mt8167-audio-lib-test",
    "//src/devices/nand/drivers/ram-nand:ram-nand-test",
    "//src/devices/pci/lib/device-protocol-pci/test:device-protocol-pci",
    "//src/devices/power/drivers/as370-power:as370-power-test",
    "//src/devices/power/drivers/msm8x53-power:msm8x53-power-test",
    "//src/devices/rtc/drivers/fallback:fallback-rtc",
    "//src/devices/securemem/drivers/aml-securemem:aml-securemem-test",
    "//src/devices/serial/drivers/uart16550:uart16550-test",
    "//src/devices/spi/drivers/mtk-spi:mtk-spi-test",
    "//src/devices/spi/drivers/spi:spi-test",
    "//src/devices/sysmem/tests/sysmem",
    "//src/devices/tee/drivers/optee:optee-message-test",
    "//src/devices/tests/crash-device",
    "//src/devices/tests/ddk-fidl-test",
    "//src/devices/tests/ddk-lifecycle",
    "//src/devices/tests/ddk-power",
    "//src/devices/tests/ddk-runcompatibilityhook",
    "//src/devices/tests/ddk-schedule-work",
    "//src/devices/tests/devfs",
    "//src/devices/tests/devhost-test",
    "//src/devices/tests/mock-device",
    "//src/devices/tests/sysdev",
    "//src/devices/thermal/bin/thermal-cli",
    "//src/devices/usb/drivers/mt-musb-host:mt-hci-request-queue-test",
    "//src/devices/usb/drivers/mt-musb-host:mt-hci-test",
    "//src/devices/usb/drivers/mt-musb-host:mt-hci-transaction-test",
    "//src/devices/usb/lib/usb/test:usb-desc-lib-test",
    "//src/devices/usb/lib/usb/test:usb-request-test",
    "//src/devices/usb/lib/usb/test:usb-wrapper-test",
    "//src/media/audio/drivers/alc5663",
    "//src/media/audio/tools/audio-driver-ctl:test",
    "//src/storage/fshost:block-watcher-test",
    "//src/storage/fshost:fshost-metrics-test",
    "//src/storage/fshost:fshost-test",
    "//src/ui/backlight/drivers/sg-micro:sgm37603a-test",
    "//src/ui/backlight/drivers/ti-lp8556:ti-lp8556-test",
    "//src/ui/backlight/tests:backlight-test",
    "//zircon/system/core/bootsvc/test:bootsvc-unit-test",
    "//zircon/system/core/console:console-test",
    "//zircon/system/core/netsvc",
    "//zircon/system/core/netsvc:netsvc-stress-test",
    "//zircon/system/core/netsvc:netsvc-test",
    "//zircon/system/core/ptysvc:ptysvc-test",
    "//zircon/system/core/svchost:crashsvc-test",
    "//zircon/system/uapp/blobfs",
    "//zircon/system/uapp/minfs",
    "//zircon/system/ulib/blobfs/test:blobfs-integration",
    "//zircon/system/ulib/blobfs/test:blobfs-integration-paged",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-fragmentation",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-fragmentation-paged",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-no-space",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-no-space-paged",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-short",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-short-paged",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-use-second-bitmap",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-use-second-bitmap-paged",
    "//zircon/system/ulib/blobfs/test:blobfs-unit",
    "//zircon/system/ulib/block-client/test:block-client-unit",
    "//zircon/system/ulib/c/test:atexit",
    "//zircon/system/ulib/c/test:debugdata",
    "//zircon/system/ulib/c/test:default-stack-size-default",
    "//zircon/system/ulib/c/test:default-stack-size-phdr",
    "//zircon/system/ulib/c/test:posix-clocks",
    "//zircon/system/ulib/c/test/sanitizer:sanitizer-utils",
    "//zircon/system/ulib/devmgr-integration-test/test:devmgr-integration",
    "//zircon/system/ulib/disk_inspector/test:disk_inspector_unit",
    "//zircon/system/ulib/driver-integration-test/test:driver-integration",
    "//zircon/system/ulib/elf-search/test:elf-search",
    "//zircon/system/ulib/fdio/test:fdio",
    "//zircon/system/ulib/fdio/test/constructors:fdio-constructor",
    "//zircon/system/ulib/fidl-async/test:fidl-async-test",
    "//zircon/system/ulib/fit/test:fit",
    "//zircon/system/ulib/fs/journal/test:journal-unit",
    "//zircon/system/ulib/fs/metrics/test:metrics-cobalt",
    "//zircon/system/ulib/fs/metrics/test:metrics-composite-latency-event",
    "//zircon/system/ulib/fs/metrics/test:metrics-inspect",
    "//zircon/system/ulib/fs/test_support/test:fs_test_support",
    "//zircon/system/ulib/ftl/test:ftl_test",
    "//zircon/system/ulib/inspect/test:inspect",
    "//zircon/system/ulib/io-scheduler/test:io-scheduler-test",
    "//zircon/system/ulib/lazy_init/test:lazy_init-test",
    "//zircon/system/ulib/libabr/test:libabr-test",
    "//zircon/system/ulib/libzbi/test:zbi",
    "//zircon/system/ulib/minfs/allocator/test:minfs-allocator-unit",
    "//zircon/system/ulib/minfs/test:minfs-integration",
    "//zircon/system/ulib/minfs/test:minfs-power",
    "//zircon/system/ulib/minfs/test:minfs-unit",
    "//zircon/system/ulib/mock-function/test:mock-function-test",
    "//zircon/system/ulib/perftest/test:perftest",
    "//zircon/system/ulib/range/test:range",
    "//zircon/system/ulib/storage-metrics/test:storage-metrics",
    "//zircon/system/ulib/storage/buffer/test:storage_buffer",
    "//zircon/system/ulib/storage/operation/test:storage_operation",
    "//zircon/system/ulib/sysconfig-client/test:sysconfig-sync-client-test",
    "//zircon/system/ulib/tftp/test:tftp-test",
    "//zircon/system/ulib/trace-engine/test",
    "//zircon/system/ulib/trace-provider/test",
    "//zircon/system/ulib/uart/test:uart-unittests",
    "//zircon/system/ulib/unittest/test:unittest",
    "//zircon/system/ulib/zbi-bootfs/test:zbi-bootfs-test",
    "//zircon/system/utest/core:c11-condvar",
    "//zircon/system/utest/core:c11-mutex",
    "//zircon/system/utest/core:c11-thread",
    "//zircon/system/utest/core:channel",
    "//zircon/system/utest/core:channel-write-etc",
    "//zircon/system/utest/core:clock",
    "//zircon/system/utest/core:debug",
    "//zircon/system/utest/core:elf-tls",
    "//zircon/system/utest/core:event-pair",
    "//zircon/system/utest/core:fifo",
    "//zircon/system/utest/core:fpu",
    "//zircon/system/utest/core:futex",
    "//zircon/system/utest/core:handle-close",
    "//zircon/system/utest/core:handle-dup",
    "//zircon/system/utest/core:handle-info",
    "//zircon/system/utest/core:handle-transfer",
    "//zircon/system/utest/core:handle-wait",
    "//zircon/system/utest/core:job",
    "//zircon/system/utest/core:memory-mapping",
    "//zircon/system/utest/core:object-child",
    "//zircon/system/utest/core:object-info",
    "//zircon/system/utest/core:object-wait",
    "//zircon/system/utest/core:pager",
    "//zircon/system/utest/core:port",
    "//zircon/system/utest/core:process",
    "//zircon/system/utest/core:pthread-barrier",
    "//zircon/system/utest/core:pthread",
    "//zircon/system/utest/core:pthread-tls",
    "//zircon/system/utest/core:socket",
    "//zircon/system/utest/core:stack",
    "//zircon/system/utest/core:stream",
    "//zircon/system/utest/core:sync-completion",
    "//zircon/system/utest/core:sync-condition",
    "//zircon/system/utest/core:sync-mutex",
    "//zircon/system/utest/core:threads",
    "//zircon/system/utest/core:time",
    "//zircon/system/utest/core:version",
    "//zircon/system/utest/core:vmar",
    "//zircon/system/utest/core:vmo",
    "//zircon/system/utest/dlfcn",
    "//zircon/system/utest/evil",
    "//zircon/system/utest/fidl:fidl-handle-policy-test-app",
    "//zircon/system/utest/fidl",
    "//zircon/system/utest/fs",
    "//zircon/system/utest/fs-bench",
    "//zircon/system/utest/fs-management",
    "//zircon/system/utest/fs-recovery",
    "//zircon/system/utest/fs-test-utils",
    "//zircon/system/utest/futex-ownership",
    "//zircon/system/utest/kcounter",
    "//zircon/system/utest/log",
    "//zircon/system/utest/memfs",
    "//zircon/system/utest/minfs-micro-benchmark",
    "//zircon/system/utest/msd",
    "//zircon/system/utest/runtests-utils",
    "//zircon/system/utest/service:service-llcpp-test",
    "//zircon/system/utest/time",
    "//zircon/system/utest/trace",
    "//zircon/system/utest/trace:trace-static-engine",
    "//zircon/system/utest/utc-procargs",
    "//zircon/system/utest/vdso-variant",
    "//zircon/third_party/uapp/fsck-msdosfs",
    "//zircon/third_party/uapp/mkfs-msdosfs",
    "//zircon/third_party/ulib/linenoise/test:linenoise-test",
  ]

  if (target_cpu == "x64") {
    deps += [
      "//src/devices/board/drivers/x86:x86-battery-test",
      "//src/devices/board/drivers/x86:x86-board-test",
      "//src/devices/board/drivers/x86:x86-cros-ec-test",
      "//src/devices/board/drivers/x86:x86-lid-test",
      "//src/devices/board/drivers/x86:x86-pwrsrc-test",
      "//src/devices/board/drivers/x86:x86-thermal-test",
      "//zircon/system/utest/x86-board",
      "//zircon/system/utest/x86-umip",
    ]
  }
}

fini_manifest("migrated-tests") {
  # Use the same naming scheme as `aggregate_manifest`.
  outputs = [ "$target_out_dir/$target_name.unification.manifest" ]

  deps = [
    "//src/connectivity/ethernet/drivers/asix-88179:usb-virtual-bus-asix-88179",
    "//src/connectivity/ethernet/drivers/usb-cdc-ecm:usb-cdc-ecm-unittest",
    "//src/devices/block/bin/biotime:biotime-test",
    "//src/devices/block/drivers/ahci:ahci-unittest",
    "//src/devices/block/drivers/core:core-unittest",
    "//src/devices/block/drivers/gpt:gpt-device-test",
    "//src/devices/block/drivers/mbr:mbr-test",
    "//src/devices/board/drivers/mt8167s_ref:mt8167s_ref-test",
    "//src/devices/bus/drivers/pci/test:pci-driver",
    "//src/devices/bus/lib/device-protocol-pdev/test:device-protocol-pdev-test",
    "//src/devices/clock/drivers/amlogic-clk:amlogic-clk-test",
    "//src/devices/clock/drivers/msm8x53-clk:msm8x53-clk-test",
    "//src/devices/cpu/drivers/aml-cpu:aml-cpu-test",
    "//src/devices/gpio/drivers/aml-axg-gpio:aml-axg-gpio-test",
    "//src/devices/lib/as370/test:audio-dsp-test",
    "//src/devices/lib/as370/test:syn-audio-in-test",
    "//src/devices/lib/mt8167/test:mt8167-audio-lib-test",
    "//src/devices/nand/drivers/ram-nand:ram-nand-test",
    "//src/devices/pci/lib/device-protocol-pci/test:device-protocol-pci",
    "//src/devices/power/drivers/as370-power:as370-power-test",
    "//src/devices/power/drivers/msm8x53-power:msm8x53-power-test",
    "//src/devices/rtc/drivers/fallback:fallback-rtc",
    "//src/devices/securemem/drivers/aml-securemem:aml-securemem-test",
    "//src/devices/serial/drivers/uart16550:uart16550-test",
    "//src/devices/spi/drivers/mtk-spi:mtk-spi-test",
    "//src/devices/spi/drivers/spi:spi-test",
    "//src/devices/sysmem/tests/sysmem",
    "//src/devices/tee/drivers/optee:optee-message-test",
    "//src/devices/tests/crash-device",
    "//src/devices/tests/ddk-fidl-test",
    "//src/devices/tests/ddk-lifecycle",
    "//src/devices/tests/ddk-power",
    "//src/devices/tests/ddk-runcompatibilityhook",
    "//src/devices/tests/ddk-schedule-work",
    "//src/devices/tests/devfs",
    "//src/devices/tests/devhost-test",
    "//src/devices/tests/mock-device",
    "//src/devices/tests/sysdev",
    "//src/devices/thermal/bin/thermal-cli",
    "//src/devices/usb/drivers/mt-musb-host:mt-hci-request-queue-test",
    "//src/devices/usb/drivers/mt-musb-host:mt-hci-test",
    "//src/devices/usb/drivers/mt-musb-host:mt-hci-transaction-test",
    "//src/devices/usb/lib/usb/test:usb-desc-lib-test",
    "//src/devices/usb/lib/usb/test:usb-request-test",
    "//src/devices/usb/lib/usb/test:usb-wrapper-test",
    "//src/graphics/display/bin/display-factory-test",
    "//src/graphics/display/bin/display-test",
    "//src/media/audio/drivers/alc5663",
    "//src/media/audio/drivers/astro-tdm-output/test:astro-audio-out-test",
    "//src/media/audio/tools/audio-driver-ctl:test",
    "//src/storage/fshost:block-watcher-test",
    "//src/storage/fshost:fshost-metrics-test",
    "//src/storage/fshost:fshost-test",
    "//src/ui/backlight/drivers/sg-micro:sgm37603a-test",
    "//src/ui/backlight/drivers/ti-lp8556:ti-lp8556-test",
    "//src/ui/backlight/tests:backlight-test",
    "//zircon/system/core/bootsvc/test:bootsvc-unit-test",
    "//zircon/system/core/console:console-test",
    "//zircon/system/core/netsvc:netsvc-stress-test",
    "//zircon/system/core/netsvc:netsvc-test",
    "//zircon/system/core/ptysvc:ptysvc-test",
    "//zircon/system/core/svchost:crashsvc-test",
    "//zircon/system/uapp/blobfs",
    "//zircon/system/uapp/minfs",
    "//zircon/system/ulib/blobfs/test:blobfs-integration",
    "//zircon/system/ulib/blobfs/test:blobfs-integration-paged",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-fragmentation",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-fragmentation-paged",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-no-space",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-no-space-paged",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-short",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-short-paged",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-use-second-bitmap",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-use-second-bitmap-paged",
    "//zircon/system/ulib/blobfs/test:blobfs-unit",
    "//zircon/system/ulib/block-client/test:block-client-unit",
    "//zircon/system/ulib/c/test:atexit",
    "//zircon/system/ulib/c/test:debugdata",
    "//zircon/system/ulib/c/test:default-stack-size-default",
    "//zircon/system/ulib/c/test:default-stack-size-phdr",
    "//zircon/system/ulib/c/test:posix-clocks",
    "//zircon/system/ulib/c/test/sanitizer:sanitizer-utils",
    "//zircon/system/ulib/devmgr-integration-test/test:devmgr-integration",
    "//zircon/system/ulib/disk_inspector/test:disk_inspector_unit",
    "//zircon/system/ulib/driver-integration-test/test:driver-integration",
    "//zircon/system/ulib/elf-search/test:elf-search",
    "//zircon/system/ulib/fdio/test:fdio",
    "//zircon/system/ulib/fdio/test/constructors:fdio-constructor",
    "//zircon/system/ulib/fidl-async/test:fidl-async-test",
    "//zircon/system/ulib/fit/test:fit",
    "//zircon/system/ulib/fs/journal/test:journal-unit",
    "//zircon/system/ulib/fs/metrics/test:metrics-cobalt",
    "//zircon/system/ulib/fs/metrics/test:metrics-composite-latency-event",
    "//zircon/system/ulib/fs/metrics/test:metrics-inspect",
    "//zircon/system/ulib/fs/test_support/test:fs_test_support",
    "//zircon/system/ulib/ftl/test:ftl_test",
    "//zircon/system/ulib/inspect/test:inspect",
    "//zircon/system/ulib/io-scheduler/test:io-scheduler-test",
    "//zircon/system/ulib/lazy_init/test:lazy_init-test",
    "//zircon/system/ulib/libabr/test:libabr-test",
    "//zircon/system/ulib/libzbi/test:zbi",
    "//zircon/system/ulib/minfs/allocator/test:minfs-allocator-unit",
    "//zircon/system/ulib/minfs/test:minfs-integration",
    "//zircon/system/ulib/minfs/test:minfs-power",
    "//zircon/system/ulib/minfs/test:minfs-unit",
    "//zircon/system/ulib/mock-function/test:mock-function-test",
    "//zircon/system/ulib/perftest/test:perftest",
    "//zircon/system/ulib/range/test:range",
    "//zircon/system/ulib/storage-metrics/test:storage-metrics",
    "//zircon/system/ulib/storage/buffer/test:storage_buffer",
    "//zircon/system/ulib/storage/operation/test:storage_operation",
    "//zircon/system/ulib/sysconfig-client/test:sysconfig-sync-client-test",
    "//zircon/system/ulib/tftp/test:tftp-test",
    "//zircon/system/ulib/trace-engine/test",
    "//zircon/system/ulib/trace-provider/test",
    "//zircon/system/ulib/uart/test:uart-unittests",
    "//zircon/system/ulib/unittest/test:unittest",
    "//zircon/system/ulib/zbi-bootfs/test:zbi-bootfs-test",
    "//zircon/system/utest/core:c11-condvar",
    "//zircon/system/utest/core:c11-mutex",
    "//zircon/system/utest/core:c11-thread",
    "//zircon/system/utest/core:channel",
    "//zircon/system/utest/core:channel-write-etc",
    "//zircon/system/utest/core:clock",
    "//zircon/system/utest/core:debug",
    "//zircon/system/utest/core:elf-tls",
    "//zircon/system/utest/core:event-pair",
    "//zircon/system/utest/core:fifo",
    "//zircon/system/utest/core:fpu",
    "//zircon/system/utest/core:futex",
    "//zircon/system/utest/core:handle-close",
    "//zircon/system/utest/core:handle-dup",
    "//zircon/system/utest/core:handle-info",
    "//zircon/system/utest/core:handle-transfer",
    "//zircon/system/utest/core:handle-wait",
    "//zircon/system/utest/core:job",
    "//zircon/system/utest/core:memory-mapping",
    "//zircon/system/utest/core:object-child",
    "//zircon/system/utest/core:object-info",
    "//zircon/system/utest/core:object-wait",
    "//zircon/system/utest/core:pager",
    "//zircon/system/utest/core:port",
    "//zircon/system/utest/core:process",
    "//zircon/system/utest/core:pthread-barrier",
    "//zircon/system/utest/core:pthread",
    "//zircon/system/utest/core:pthread-tls",
    "//zircon/system/utest/core:socket",
    "//zircon/system/utest/core:stack",
    "//zircon/system/utest/core:stream",
    "//zircon/system/utest/core:sync-completion",
    "//zircon/system/utest/core:sync-condition",
    "//zircon/system/utest/core:sync-mutex",
    "//zircon/system/utest/core:threads",
    "//zircon/system/utest/core:time",
    "//zircon/system/utest/core:version",
    "//zircon/system/utest/core:vmar",
    "//zircon/system/utest/core:vmo",
    "//zircon/system/utest/dlfcn",
    "//zircon/system/utest/evil",
    "//zircon/system/utest/fidl",
    "//zircon/system/utest/fs",
    "//zircon/system/utest/fs-bench",
    "//zircon/system/utest/fs-management",
    "//zircon/system/utest/fs-recovery",
    "//zircon/system/utest/fs-test-utils",
    "//zircon/system/utest/futex-ownership",
    "//zircon/system/utest/kcounter",
    "//zircon/system/utest/log",
    "//zircon/system/utest/memfs",
    "//zircon/system/utest/minfs-micro-benchmark",
    "//zircon/system/utest/msd",
    "//zircon/system/utest/runtests-utils",
    "//zircon/system/utest/service:service-llcpp-test",
    "//zircon/system/utest/time",
    "//zircon/system/utest/trace",
    "//zircon/system/utest/trace:trace-static-engine",
    "//zircon/system/utest/utc-procargs",
    "//zircon/system/utest/vdso-variant",
    "//zircon/third_party/ulib/linenoise/test:linenoise-test",
  ]

  if (target_cpu == "x64") {
    deps += [
      "//src/devices/board/drivers/x86:x86-battery-test",
      "//src/devices/board/drivers/x86:x86-board-test",
      "//src/devices/board/drivers/x86:x86-cros-ec-test",
      "//src/devices/board/drivers/x86:x86-lid-test",
      "//src/devices/board/drivers/x86:x86-pwrsrc-test",
      "//src/devices/board/drivers/x86:x86-thermal-test",
      "//zircon/system/uapp/acpidump:test",
      "//zircon/system/utest/x86-board",
      "//zircon/system/utest/x86-umip",
    ]
  }
}
