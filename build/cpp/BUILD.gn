# Copyright 2018 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/fidl/toolchain.gni")

# TODO(fxbug.dev/69585): Delete this config after all user code
# migrates to typed channels.
config("fidl-llcpp-deprecated-raw-channels") {
  cflags_cc = [ "-DFIDL_LLCPP_ALLOW_DEPRECATED_RAW_CHANNELS" ]

  # Please do not add to this list. Refer to fxbug.dev/69585 to see
  # how a target could be migrated to use typed channels.
  visibility = [
    "//examples/dotmatrix_display:bin2",
    "//examples/fidl/llcpp/request_pipelining/server:bin",
    "//examples/fidl/llcpp/services/client:bin",
    "//garnet/examples/fidl/echo_client_llcpp:bin",
    "//garnet/examples/fidl/echo_server_llcpp:bin",
    "//garnet/public/lib/svc/cpp:cpp",
    "//garnet/public/lib/test_runner/cpp:cpp",
    "//sdk/lib/fdio:fdio",
    "//sdk/lib/fdio/tests:fdio",
    "//src/bringup/bin/bootsvc:bootfs_loader_service_test",
    "//src/bringup/bin/bootsvc:lib",
    "//src/bringup/bin/bootsvc:util",
    "//src/bringup/bin/bootsvc/integration_test:bootsvc-integration-test",
    "//src/bringup/bin/console-launcher:bin",
    "//src/bringup/bin/console-launcher:lib",
    "//src/bringup/bin/device-name-provider:args",
    "//src/bringup/bin/device-name-provider:device-name-provider",
    "//src/bringup/bin/device-name-provider/tests:device-name-provider-test",
    "//src/bringup/bin/device-name-provider/tests:integration-test",
    "//src/bringup/bin/netsvc:args",
    "//src/bringup/bin/netsvc:netsvc",
    "//src/bringup/bin/netsvc:netsvc-stress-test",
    "//src/bringup/bin/netsvc:netsvc-test",
    "//src/bringup/bin/netsvc:netsvc_common",
    "//src/bringup/bin/ptysvc:common",
    "//src/bringup/bin/pwrbtn-monitor:pwrbtn-monitor",
    "//src/bringup/bin/svchost:crashsvc",
    "//src/bringup/bin/svchost:crashsvc-test",
    "//src/bringup/bin/svchost:svchost",
    "//src/bringup/bin/sysinfo:sysinfo",
    "//src/bringup/bin/sysinfo:test",
    "//src/bringup/bin/virtcon:vc-display-test",
    "//src/bringup/bin/virtcon:vc-session-manager-test",
    "//src/bringup/bin/virtcon:vc-session-manager-test",
    "//src/bringup/bin/virtcon:vc-text-test",
    "//src/bringup/bin/virtcon:virtual-console",
    "//src/bringup/bin/virtcon:virtual-console",
    "//src/bringup/bin/waitfor:waitfor",
    "//src/bringup/lib/mexec:mexec",
    "//src/bringup/lib/mexec/testing:zbi-test-entry",
    "//src/cobalt/bin/system-metrics:system_metrics_daemon_lib",
    "//src/connectivity/network/drivers/network-device:src",
    "//src/connectivity/network/drivers/network-device/mac:mac",
    "//src/connectivity/network/drivers/network-device/mac:mac_ddk",
    "//src/connectivity/network/drivers/network-device/mac:test_bin",
    "//src/connectivity/network/testing/netemul/runner:src",
    "//src/connectivity/openthread/drivers/ot-radio:*",
    "//src/connectivity/openthread/ot-stack:app",
    "//src/connectivity/openthread/tests/fake-drivers/fake-ot-radio:fake-ot-radio-driver",
    "//src/connectivity/telephony/drivers/qmi-fake-transport:fake_qmi_driver",
    "//src/connectivity/telephony/tests/driver-integration:telephony-qmi-usb-integration-test",
    "//src/connectivity/telephony/tests/fake-drivers/at-fake-transport:fake_at_driver",
    "//src/connectivity/telephony/tests/fake-drivers/fake-transport-base:fake-transport-base",
    "//src/connectivity/wlan/drivers/testing:wlanphy-testdev",
    "//src/connectivity/wlan/drivers/wlanphy:wlanphy_convert_unittest",
    "//src/connectivity/wlan/drivers/wlanphy:wlanphy_driver",
    "//src/connectivity/wlan/testing/wlantap-driver:wlantap_driver",
    "//src/developer/memory/metrics:metrics",
    "//src/developer/shell/console:console_unittests_bin",
    "//src/developer/shell/console:lib",
    "//src/developer/shell/interpreter:shell_server_lib",
    "//src/developer/shell/interpreter:shell_server_test_bin",
    "//src/devices/bin/acpidump:src",
    "//src/devices/bin/driver-registrar:driver-registrar",
    "//src/devices/bin/driver_host:common",
    "//src/devices/bin/driver_host:driver_host_test",
    "//src/devices/bin/driver_host2:lib",
    "//src/devices/bin/driver_host2:unittests",
    "//src/devices/bin/driver_manager:driver_runner",
    "//src/devices/bin/driver_manager:driver_runner_test",
    "//src/devices/bin/driver_manager:lib",
    "//src/devices/bin/driverctl:driverctl",
    "//src/devices/bin/lsdev:lsdev",
    "//src/devices/bin/register-util:bin",
    "//src/devices/bin/register-util:register-util",
    "//src/devices/bin/unbind:unbind",
    "//src/devices/block/bin/lsblk:lsblk",
    "//src/devices/block/bin/sdio:sdio",
    "//src/devices/block/bin/sdio:sdio-test-bin",
    "//src/devices/block/drivers/block-verity:block-verity-test",
    "//src/devices/block/drivers/block-verity:verified-volume-client",
    "//src/devices/block/drivers/ftl/tests:ftl-integration",
    "//src/devices/block/drivers/sdmmc:sdmmc",
    "//src/devices/block/drivers/sdmmc:sdmmc-test-bin",
    "//src/devices/block/drivers/usb-mass-storage:ums-integration",
    "//src/devices/board/drivers/x86/test:x86-board",
    "//src/devices/bus/drivers/platform:platform-bus",
    "//src/devices/bus/drivers/platform:platform-bus-unittest",
    "//src/devices/bus/drivers/platform/test:platform-bus",
    "//src/devices/bus/drivers/platform/test:platform-bus-bti",
    "//src/devices/cpu/bin/cpuctl:cpuctl",
    "//src/devices/cpu/bin/cpuctl:cpuctl-test-bin",
    "//src/devices/cpu/drivers/aml-cpu:aml-cpu-test-bin",
    "//src/devices/cpu/drivers/aml-cpu-legacy:aml-cpu-legacy",
    "//src/devices/cpu/drivers/aml-cpu-legacy:aml-cpu-legacy-test-bin",
    "//src/devices/gpio/bin/gpioutil:gpioutil",
    "//src/devices/gpio/bin/gpioutil:gpioutil-test-bin",
    "//src/devices/gpio/drivers/gpio:gpio-test-bin",
    "//src/devices/i2c/bin:i2cutil",
    "//src/devices/i2c/drivers/i2c:i2c-test-bin",
    "//src/devices/lib/driver2:llcpp",
    "//src/devices/ml/drivers/aml-nna:aml-nna",
    "//src/devices/ml/drivers/aml-nna:aml-nna-test-bin",
    "//src/devices/nand/bin/nand-util:common",
    "//src/devices/nand/drivers/broker/test:common",
    "//src/devices/nand/drivers/skip-block:skip-block-test-bin",
    "//src/devices/power/drivers/ti-ina231:ti-ina231-test-bin",
    "//src/devices/ram/bin/ram-info:ram-info",
    "//src/devices/ram/bin/ram-info:ram-info-test-bin",
    "//src/devices/ram/drivers/aml-ram:aml-ram-test-bin",
    "//src/devices/registers/drivers/registers:registers",
    "//src/devices/registers/drivers/registers:registers-test",
    "//src/devices/registers/testing/mock-registers:mock-registers",
    "//src/devices/registers/testing/mock-registers:mock-registers-test",
    "//src/devices/securemem/drivers/aml-securemem:aml-securemem",
    "//src/devices/securemem/drivers/aml-securemem:aml-securemem-test-bin",
    "//src/devices/serial/bin/serial-test:serial-test",
    "//src/devices/serial/drivers/virtio-console:virtio_console",
    "//src/devices/spi/drivers/spi:spi",
    "//src/devices/spi/drivers/spi:spi-test-bin",
    "//src/devices/sysmem/drivers/sysmem:sysmem-unittest-bin",
    "//src/devices/sysmem/drivers/sysmem:sysmem_common_srcs",
    "//src/devices/sysmem/testing/mock-sysmem:mock-sysmem",
    "//src/devices/sysmem/tests/sysmem:sysmem",
    "//src/devices/sysmem/tools:common_srcs",
    "//src/devices/tee/drivers/optee:optee-client-test-bin",
    "//src/devices/tee/drivers/optee:optee-controller-test-bin",
    "//src/devices/tee/drivers/optee:optee_lib",
    "//src/devices/temperature/drivers/tmp112:tmp112-test-bin",
    "//src/devices/testing/fake_ddk:fake_ddk",
    "//src/devices/tests/bind-fail-test:tests",
    "//src/devices/tests/bind-test:test",
    "//src/devices/tests/ddk-environment-test:ddk-environment",
    "//src/devices/tests/ddk-firmware-test:ddk-firmware",
    "//src/devices/tests/ddk-instance-lifecycle-test:driver",
    "//src/devices/tests/ddk-instance-lifecycle-test:tests",
    "//src/devices/tests/ddk-lifecycle:ddk-lifecycle",
    "//src/devices/tests/ddk-lifecycle:ddk-lifecycle-test",
    "//src/devices/tests/ddk-metadata-test:tests",
    "//src/devices/tests/ddk-power:ddk-power",
    "//src/devices/tests/ddk-runcompatibilityhook:ddk-runcompatibilityhook",
    "//src/devices/tests/devfs:devfs",
    "//src/devices/tests/driver-inspect-test:tests",
    "//src/devices/tests/mock-device:mock-device",
    "//src/devices/thermal/drivers/as370-thermal:as370-thermal-test-bin",
    "//src/devices/thermal/drivers/astro-thermistor/test:astro-thermistor-test-bin",
    "//src/devices/thermal/drivers/vs680-thermal:vs680-thermal-test-bin",
    "//src/devices/usb/bin/usb-fwloader:usb-fwloader",
    "//src/devices/usb/bin/usbctl:usbctl",
    "//src/devices/usb/drivers/aml-usb-phy-v2:aml-usb-phy-test-bin",
    "//src/devices/usb/drivers/aml-usb-phy-v2:aml-usb-phy-v2",
    "//src/devices/usb/drivers/usb-bus:usb-device",
    "//src/devices/usb/drivers/usb-peripheral:usb-peripheral",
    "//src/devices/usb/drivers/usb-peripheral:usb-peripheral-unittest-bin",
    "//src/devices/usb/drivers/usb-virtual-bus:usb-virtual-bus-test-bin",
    "//src/graphics/display/bin/display-test:display-test",
    "//src/graphics/display/bin/dsiutil:dsiutil",
    "//src/graphics/display/drivers/amlogic-display:common_srcs",
    "//src/graphics/display/drivers/display:shared",
    "//src/graphics/display/drivers/display/tests:base",
    "//src/graphics/display/drivers/display/tests:display-core-unittests",
    "//src/graphics/display/drivers/fake:fake-display-device-tree",
    "//src/graphics/display/testing:testing",
    "//src/graphics/drivers/aml-gpu:aml-gpu-test-bin",
    "//src/graphics/drivers/aml-gpu:sources",
    "//src/graphics/drivers/misc/goldfish:goldfish-pipe-device-test",
    "//src/graphics/drivers/misc/goldfish:goldfish_driver",
    "//src/graphics/drivers/misc/goldfish_address_space:address_space_driver",
    "//src/graphics/drivers/misc/goldfish_address_space:goldfish-address-space-test",
    "//src/graphics/drivers/misc/goldfish_control:control_driver",
    "//src/graphics/drivers/misc/goldfish_control:goldfish-control-device-test",
    "//src/graphics/drivers/misc/goldfish_sync:goldfish-sync-device-test",
    "//src/graphics/drivers/misc/goldfish_sync:goldfish_sync_driver",
    "//src/graphics/drivers/msd-arm-mali/tests/integration:msd_arm_mali_integration_tests",
    "//src/graphics/drivers/msd-img-rgx/tests/integration:msd_img_rgx_integration_tests_executable",
    "//src/graphics/drivers/msd-img-rgx/tests/integration:msd_img_rgx_no_hardware_integration_tests_executable",
    "//src/graphics/drivers/msd-intel-gen/tests/integration:msd_intel_gen_integration_tests",
    "//src/graphics/drivers/msd-vsi-vip/tests/integration:msd_vsi_vip_integration_tests",
    "//src/graphics/drivers/virtio:gpu_lib",
    "//src/graphics/lib/magma/src/magma_util/platform/zircon:connection",
    "//src/graphics/lib/magma/src/magma_util/platform/zircon:connection_client",
    "//src/graphics/lib/magma/src/magma_util/platform/zircon:device_client",
    "//src/graphics/lib/magma/src/magma_util/platform/zircon:logger",
    "//src/graphics/lib/magma/src/magma_util/platform/zircon:sysmem_connection",
    "//src/graphics/lib/magma/src/tools:magma_info",
    "//src/graphics/lib/magma/tests/helper:test_device_helper",
    "//src/graphics/lib/magma/tests/integration:magma_abi_conformance_tests",
    "//src/graphics/lib/magma/tests/integration:virtmagma_abi_conformance_tests",
    "//src/graphics/tests/goldfish_benchmark:bin",
    "//src/graphics/tests/goldfish_test:bin",
    "//src/graphics/tests/goldfish_test:goldfish_test_bin",
    "//src/graphics/tests/vkloop:vkloop",
    "//src/graphics/tests/vkloop:vkloop_bin",
    "//src/lib/fake-clock/lib:lib",
    "//src/lib/fidl/c/llcpp_interop_tests:bin",
    "//src/lib/fidl/c/walker_tests:test_sources",
    "//src/lib/fidl/llcpp/tests:fidl_llcpp_type_tests_bin",
    "//src/lib/framebuffer:framebuffer",
    "//src/lib/framebuffer/test:framebuffer-test",
    "//src/lib/isolated_devmgr:usb-virtual-bus",
    "//src/lib/isolated_devmgr/v2_component:client",
    "//src/lib/isolated_devmgr/v2_component:support",
    "//src/lib/loader_service:loader_service",
    "//src/media/audio/audio_core:unittest_bin",
    "//src/media/audio/drivers/usb-audio:shared",
    "//src/media/audio/drivers/usb-audio:usb-audio",
    "//src/media/audio/drivers/usb-audio/tests:usb-audio-test-bin",
    "//src/media/audio/tools/audio-driver-ctl:bin",
    "//src/media/drivers/amlogic_decoder/tests/runner:amlogic_decoder_integration_tests_bin",
    "//src/modular/lib/fidl:environment",
    "//src/power/shutdown-shim:shutdown-shim",
    "//src/recovery/factory_reset:factory_reset_unittests",
    "//src/security/tee/tee-client-api:tee-client-api",
    "//src/security/tee/tee-client-api:tee-client-api-static",
    "//src/security/zxcrypt:zxcrypt-fdio",
    "//src/security/zxcrypt/tests:zxcrypt",
    "//src/storage/bin/blobfs:blobfs",
    "//src/storage/bin/storage-metrics:storage-metrics",
    "//src/storage/blobfs:blobfs",
    "//src/storage/blobfs/test:blobfs-integration",
    "//src/storage/blobfs/test:blobfs_integration",
    "//src/storage/blobfs/test:blobfs_unittest",
    "//src/storage/blobfs/test:executable_mount",
    "//src/storage/blobfs/test:external_decompressor_integration",
    "//src/storage/conformance/conformance_harness/minfs:bin",
    "//src/storage/conformance/conformance_harness/ulibfs:bin",
    "//src/storage/factory/factoryfs:factoryfs",
    "//src/storage/fs_test:access_tests",
    "//src/storage/fs_test:corrupt_tests",
    "//src/storage/fs_test:dot_dot_tests",
    "//src/storage/fs_test:fs_test",
    "//src/storage/fs_test:minfs_tests",
    "//src/storage/fs_test:rename_tests",
    "//src/storage/fs_test:resize_tests",
    "//src/storage/fs_test:watcher_tests",
    "//src/storage/fshost:block-watcher",
    "//src/storage/fshost:fshost",
    "//src/storage/fshost:fshost-registry",
    "//src/storage/fshost:fshost_inspect_test",
    "//src/storage/fshost:fshost_integration_test",
    "//src/storage/fshost:fshost_loader_service_test",
    "//src/storage/fshost:fshost_test",
    "//src/storage/fvm/driver/test:fvm-driver-integration",
    "//src/storage/lib/paver:gpt",
    "//src/storage/lib/paver:nelson",
    "//src/storage/lib/paver:paver",
    "//src/storage/lib/paver:paver-core",
    "//src/storage/lib/paver:skip-block",
    "//src/storage/lib/paver/test:test",
    "//src/storage/lib/utils:topological_path",
    "//src/storage/lib/utils:use_debug_log",
    "//src/storage/memfs:memfs",
    "//src/storage/minfs:minfs",
    "//src/storage/minfs/test:minfs-integration",
    "//src/storage/minfs/test:minfs_dirty_cache_integration",
    "//src/storage/minfs/test:minfs_micro_benchmark",
    "//src/sys/appmgr:lib",
    "//src/sys/component_manager/tests/memfs:memfs",
    "//src/sys/component_manager/tests/rights:expose_dir_rights_bin",
    "//src/sys/component_manager/tests/security_policy/capability_allowlist:dir_service_bin",
    "//src/sys/lib/stdout-to-debuglog/cpp:cpp",
    "//src/sys/startup:startup",
    "//src/tests/fidl/compatibility:llcpp_server",
    "//src/ui/backlight/bin/backlight:backlight",
    "//src/ui/backlight/drivers/ti-lp8556:ti-lp8556-test",
    "//src/ui/backlight/tests:backlight-test",
    "//src/ui/bin/hardware_display_controller_provider/fake:bin",
    "//src/ui/bin/hardware_display_controller_provider/fake:lib",
    "//src/ui/bin/hardware_display_controller_provider/fake/tests:unittests",
    "//src/ui/examples/tile:tile",
    "//src/ui/input/bin/hid:hid",
    "//src/ui/input/drivers/ft8201:ft8201-module",
    "//src/ui/input/drivers/ft8201:ft8201-test-bin",
    "//src/ui/input/drivers/gt6853:gt6853-module",
    "//src/ui/input/drivers/gt6853:gt6853-test",
    "//src/ui/input/drivers/hid:hid",
    "//src/ui/input/drivers/hid:hid-test",
    "//src/ui/input/drivers/hid-buttons:common",
    "//src/ui/input/drivers/hid-buttons:hid-buttons-test",
    "//src/ui/input/drivers/hid-input-report:hid-input-report",
    "//src/ui/input/drivers/hid-input-report:hid-input-report-test-bin",
    "//src/ui/input/drivers/usb-hid:usb-hid-test",
    "//src/ui/input/lib/input-report-reader:input-report-test",
    "//src/ui/input/tests/hid:hid-driver-test",
    "//src/ui/light/drivers/aml-light:aml-light-test",
    "//src/ui/tools/print-input-report:bin",
    "//src/ui/tools/print-input-report:print-input-report-test-bin",
    "//src/virtualization/bin/guest:bin",
    "//src/virtualization/bin/guest_runner:bin",
    "//vendor/*",
    "//zircon/system/ulib/audio-utils:audio-utils",
    "//zircon/system/ulib/audio-utils-legacy:audio-utils-legacy",
    "//zircon/system/ulib/block-client:block-client",
    "//zircon/system/ulib/c/test:cdebugdata-test",
    "//zircon/system/ulib/debugdata/test:debugdata",
    "//zircon/system/ulib/fdio-caller/test:fdio-caller",
    "//zircon/system/ulib/fidl-async/test:fidl-async-test",
    "//zircon/system/ulib/fs:fs",
    "//zircon/system/ulib/fs-management:fs-management",
    "//zircon/system/ulib/fs-test-utils:fs-test-utils",
    "//zircon/system/ulib/fs/test:fs-connection",
    "//zircon/system/ulib/fs/test:fs-vnode",
    "//zircon/system/ulib/fvm-devices:fvm-devices",
    "//zircon/system/ulib/inet6:netifc-discover",
    "//zircon/system/ulib/intel-hda:intel-hda",
    "//zircon/system/ulib/log-writer-logger:log-writer-logger",
    "//zircon/system/ulib/memfs:memfs",
    "//zircon/system/ulib/mock-boot-arguments:mock-boot-arguments",
    "//zircon/system/ulib/ramdevice-client:ramdevice-client",
    "//zircon/system/ulib/ramdevice-client:ramdevice-client-static",
    "//zircon/system/ulib/runtests-utils:runtests-utils",
    "//zircon/system/ulib/runtests-utils/test:service-proxy-dir",
    "//zircon/system/ulib/service:service-llcpp",
    "//zircon/system/ulib/svc:svc",
    "//zircon/system/ulib/sysconfig-client:sysconfig-sync-client",
    "//zircon/system/ulib/syslog:syslog",
    "//zircon/system/ulib/syslog:syslog-compat",
    "//zircon/system/ulib/syslog:syslog-static",
    "//zircon/system/ulib/test-utils:test-utils",
    "//zircon/system/ulib/usb-peripheral-utils:usb-peripheral-utils",
    "//zircon/system/ulib/usb-virtual-bus-launcher:usb-virtual-bus-launcher",
    "//zircon/system/ulib/zxio:zxio",
    "//zircon/system/ulib/zxio/tests:zxio",
    "//zircon/system/utest/core-display:core-display",
    "//zircon/system/utest/device-enumeration:device-enumeration",
    "//zircon/system/utest/dlfcn:dlfcn",
    "//zircon/system/utest/fs-management:fs-management",
    "//zircon/system/utest/fvm:fvm",
    "//zircon/system/utest/memfs:memfs",
    "//zircon/system/utest/miscsvc:miscsvc",
    "//zircon/system/utest/pty:pty",
    "//zircon/system/utest/service:service-llcpp-test",
    "//zircon/system/utest/svchost:svchost",
    "//zircon/third_party/uapp/dash:dash",
  ]
}

# TODO(fxbug.dev/69585): Delete this config after all user code
# migrates to typed channels.
# This is used by generated C++ library from fidlgen_llcpp, which unfortunately
# cannot have a definite visibility restriction. Please do not use this config.
config(
    "fidl-llcpp-deprecated-raw-channels-reserved-for-llcpp-generated-code-only") {
  cflags_cc = [ "-DFIDL_LLCPP_ALLOW_DEPRECATED_RAW_CHANNELS" ]
}
