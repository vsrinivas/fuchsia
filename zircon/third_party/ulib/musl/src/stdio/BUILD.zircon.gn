# Copyright 2019 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

source_set("stdio") {
  deps = [ "$zx/third_party/ulib/musl:musl_internal" ]
  sources = [
    "__fclose_ca.c",
    "__fdopen.c",
    "__fmodeflags.c",
    "__fopen_rb_ca.c",
    "__lockfile.c",
    "__overflow.c",
    "__stdio_close.c",
    "__stdio_exit.c",
    "__stdio_read.c",
    "__stdio_seek.c",
    "__stdio_write.c",
    "__stdout_write.c",
    "__string_read.c",
    "__toread.c",
    "__towrite.c",
    "__uflow.c",
    "asprintf.c",
    "clearerr.c",
    "dprintf.c",
    "fclose.c",
    "feof.c",
    "ferror.c",
    "fflush.c",
    "fgetc.c",
    "fgetln.c",
    "fgetpos.c",
    "fgets.c",
    "fgetwc.c",
    "fgetws.c",
    "fileno.c",
    "flockfile.c",
    "fmemopen.c",
    "fopen.c",
    "fprintf.c",
    "fputc.c",
    "fputs.c",
    "fputwc.c",
    "fputws.c",
    "fread.c",
    "freopen.c",
    "fscanf.c",
    "fseek.c",
    "fsetpos.c",
    "ftell.c",
    "ftrylockfile.c",
    "funlockfile.c",
    "fwide.c",
    "fwprintf.c",
    "fwrite.c",
    "fwscanf.c",
    "getc.c",
    "getc_unlocked.c",
    "getchar.c",
    "getchar_unlocked.c",
    "getdelim.c",
    "getline.c",
    "gets.c",
    "getw.c",
    "getwc.c",
    "getwchar.c",
    "ofl.c",
    "ofl_add.c",
    "open_memstream.c",
    "open_wmemstream.c",
    "pclose.c",
    "perror.c",
    "popen.c",
    "printf.c",
    "putc.c",
    "putc_unlocked.c",
    "putchar.c",
    "putchar_unlocked.c",
    "puts.c",
    "putw.c",
    "putwc.c",
    "putwchar.c",
    "remove.c",
    "rewind.c",
    "scanf.c",
    "setbuf.c",
    "setbuffer.c",
    "setlinebuf.c",
    "setvbuf.c",
    "snprintf.c",
    "sprintf.c",
    "sscanf.c",
    "stderr.c",
    "stdin.c",
    "stdout.c",
    "swprintf.c",
    "swscanf.c",
    "tempnam.c",
    "tmpfile.c",
    "tmpnam.c",
    "ungetc.c",
    "ungetwc.c",
    "vasprintf.c",
    "vdprintf.c",
    "vfprintf.c",
    "vfscanf.c",
    "vfwprintf.c",
    "vfwscanf.c",
    "vprintf.c",
    "vscanf.c",
    "vsnprintf.c",
    "vsprintf.c",
    "vsscanf.c",
    "vswprintf.c",
    "vswscanf.c",
    "vwprintf.c",
    "vwscanf.c",
    "wprintf.c",
    "wscanf.c",
  ]

  configs -= [ "$zx_build_config:visibility_hidden" ]

  # TODO(42500): UBSan has found an instance of undefined behavior in this target.
  # Disable UBSan for this target temporarily until it is migrated into CI/CQ.
  configs += [ "$zx_build_config:temporarily_disable_ubsan_do_not_use" ]
}
