# Copyright 2016 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/test/test_package.gni")

executable("sockettest") {
  testonly = true

  sources = [ "sockettest.c" ]

  libs = [ "zircon" ]

  deps = [ "//sdk/lib/fdio" ]

  # TODO(fxbug.dev/58162): delete the below and fix compiler warnings
  configs += [ "//build/config:Wno-conversion" ]
}

executable("keepalivetest") {
  testonly = true

  sources = [ "keepalivetest.c" ]

  libs = [ "zircon" ]

  deps = [ "//sdk/lib/fdio" ]

  # TODO(fxbug.dev/58162): delete the below and fix compiler warnings
  configs += [ "//build/config:Wno-conversion" ]
}

executable("mctest") {
  testonly = true

  sources = [ "mctest.c" ]

  libs = [ "zircon" ]

  deps = [ "//sdk/lib/fdio" ]

  # TODO(fxbug.dev/58162): delete the below and fix compiler warnings
  configs += [ "//build/config:Wno-conversion" ]
}

executable("nbiotest") {
  testonly = true

  sources = [ "nbiotest.c" ]

  libs = [ "zircon" ]

  deps = [ "//sdk/lib/fdio" ]

  # TODO(fxbug.dev/58162): delete the below and fix compiler warnings
  configs += [ "//build/config:Wno-conversion" ]
}

executable("polltest") {
  testonly = true

  sources = [ "polltest.c" ]

  libs = [ "zircon" ]

  deps = [ "//sdk/lib/fdio" ]

  # TODO(fxbug.dev/58162): delete the below and fix compiler warnings
  configs += [ "//build/config:Wno-conversion" ]
}

executable("selecttest") {
  testonly = true

  sources = [ "selecttest.c" ]

  libs = [ "zircon" ]

  deps = [ "//sdk/lib/fdio" ]

  # TODO(fxbug.dev/58162): delete the below and fix compiler warnings
  configs += [ "//build/config:Wno-conversion" ]
}

executable("udptest") {
  testonly = true

  sources = [ "udptest.c" ]

  libs = [ "zircon" ]

  deps = [ "//sdk/lib/fdio" ]

  # TODO(fxbug.dev/58162): delete the below and fix compiler warnings
  configs += [ "//build/config:Wno-conversion" ]
}

executable("sockopttest") {
  testonly = true

  sources = [ "sockopttest.c" ]

  libs = [ "zircon" ]

  deps = [ "//sdk/lib/fdio" ]

  # TODO(fxbug.dev/58162): delete the below and fix compiler warnings
  configs += [ "//build/config:Wno-conversion" ]
}

executable("gethostbyname_test") {
  testonly = true

  sources = [ "gethostbyname_test.c" ]

  libs = [ "zircon" ]

  deps = [ "//sdk/lib/fdio" ]

  # TODO(fxbug.dev/58162): delete the below and fix compiler warnings
  configs += [ "//build/config:Wno-conversion" ]
}

package("netstack-manual-tests") {
  testonly = true

  deps = [
    ":gethostbyname_test",
    ":keepalivetest",
    ":mctest",
    ":nbiotest",
    ":polltest",
    ":selecttest",
    ":sockettest",
    ":sockopttest",
    ":udptest",
  ]

  binaries = [
    {
      name = "gethostbyname_test"
      shell = true
    },
    {
      name = "keepalivetest"
      shell = true
    },
    {
      name = "mctest"
      shell = true
    },
    {
      name = "nbiotest"
      shell = true
    },
    {
      name = "polltest"
      shell = true
    },
    {
      name = "selecttest"
      shell = true
    },
    {
      name = "sockettest"
      shell = true
    },
    {
      name = "sockopttest"
      shell = true
    },
    {
      name = "udptest"
      shell = true
    },
  ]
}

group("manual") {
  testonly = true
  deps = [ ":netstack-manual-tests" ]
}
