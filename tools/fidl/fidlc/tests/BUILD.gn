# Copyright 2019 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/test.gni")
import("//build/testing/host_test_data.gni")
import("//tools/fidl/fidlc/testdata/info.gni")

group("tests") {
  testonly = true
  deps = [ ":fidlc-test($host_toolchain)" ]
}

host_test_data("bad_cases") {
  sources = [
    "fidl/bad/fi-0001.test.fidl",
    "fidl/bad/fi-0002.test.fidl",
    "fidl/bad/fi-0003.test.fidl",
    "fidl/bad/fi-0004.test.fidl",
    "fidl/bad/fi-0005.test.fidl",
    "fidl/bad/fi-0006.test.fidl",
    "fidl/bad/fi-0007.test.fidl",
    "fidl/bad/fi-0008.test.fidl",
    "fidl/bad/fi-0011.test.fidl",
    "fidl/bad/fi-0012.test.fidl",
    "fidl/bad/fi-0013.test.fidl",
    "fidl/bad/fi-0014.test.fidl",
    "fidl/bad/fi-0015.test.fidl",
    "fidl/bad/fi-0016-a.test.fidl",
    "fidl/bad/fi-0016-b.test.fidl",
    "fidl/bad/fi-0017-a.test.fidl",
    "fidl/bad/fi-0017-b.test.fidl",
    "fidl/bad/fi-0018.test.fidl",
    "fidl/bad/fi-0019.test.fidl",
    "fidl/bad/fi-0020.test.fidl",
    "fidl/bad/fi-0024.test.fidl",
    "fidl/bad/fi-0025.test.fidl",
    "fidl/bad/fi-0026.test.fidl",
    "fidl/bad/fi-0027.test.fidl",
    "fidl/bad/fi-0028.test.fidl",
    "fidl/bad/fi-0029.test.fidl",
    "fidl/bad/fi-0030.test.fidl",
    "fidl/bad/fi-0031.test.fidl",
    "fidl/bad/fi-0032.test.fidl",
    "fidl/bad/fi-0033.test.fidl",
    "fidl/bad/fi-0034.test.fidl",
    "fidl/bad/fi-0035.test.fidl",
    "fidl/bad/fi-0036.test.fidl",
    "fidl/bad/fi-0037.test.fidl",
    "fidl/bad/fi-0038-a.test.fidl",
    "fidl/bad/fi-0038-b.test.fidl",
    "fidl/bad/fi-0039-a.test.fidl",
    "fidl/bad/fi-0039-b.test.fidl",
    "fidl/bad/fi-0040-a.test.fidl",
    "fidl/bad/fi-0040-b.test.fidl",
    "fidl/bad/fi-0046.test.fidl",
    "fidl/bad/fi-0047.test.fidl",
    "fidl/bad/fi-0048.test.fidl",
    "fidl/bad/fi-0050.test.fidl",
    "fidl/bad/fi-0057-a.test.fidl",
    "fidl/bad/fi-0057-b.test.fidl",
    "fidl/bad/fi-0057-c.test.fidl",
    "fidl/bad/fi-0057-d.test.fidl",
    "fidl/bad/fi-0058.test.fidl",
    "fidl/bad/fi-0059.test.fidl",
    "fidl/bad/fi-0065-a.test.fidl",
    "fidl/bad/fi-0065-b.test.fidl",
    "fidl/bad/fi-0065-c.test.fidl",
    "fidl/bad/fi-0066.test.fidl",
    "fidl/bad/fi-0067.test.fidl",
    "fidl/bad/fi-0068.test.fidl",
    "fidl/bad/fi-0069.test.fidl",
    "fidl/bad/fi-0070.test.fidl",
    "fidl/bad/fi-0071.test.fidl",
    "fidl/bad/fi-0072.test.fidl",
    "fidl/bad/fi-0073.test.fidl",
    "fidl/bad/fi-0074.test.fidl",
    "fidl/bad/fi-0075.test.fidl",
    "fidl/bad/fi-0076.test.fidl",
    "fidl/bad/fi-0077-a.test.fidl",
    "fidl/bad/fi-0077-b.test.fidl",
    "fidl/bad/fi-0084.test.fidl",
    "fidl/bad/fi-0093.test.fidl",
    "fidl/bad/fi-0100.test.fidl",
    "fidl/bad/fi-0110.test.fidl",
    "fidl/bad/fi-0124.test.fidl",
    "fidl/bad/fi-0125.test.fidl",
    "fidl/bad/fi-0126.test.fidl",
    "fidl/bad/fi-0127.test.fidl",
    "fidl/bad/fi-0128.test.fidl",
    "fidl/bad/fi-0129.test.fidl",
    "fidl/bad/fi-0130.test.fidl",
    "fidl/bad/fi-0131.test.fidl",
    "fidl/bad/fi-0132.test.fidl",
    "fidl/bad/fi-0133.test.fidl",
    "fidl/bad/fi-0145.test.fidl",
    "fidl/bad/fi-0158.test.fidl",
    "fidl/bad/fi-0162-a.test.fidl",
    "fidl/bad/fi-0162-b.test.fidl",
    "fidl/bad/fi-0167.test.fidl",
    "fidl/bad/fi-0178.test.fidl",
  ]
  outputs = [ "$root_out_dir/fidlc-tests/bad/{{source_file_part}}" ]
}

host_test_data("good_cases") {
  sources = [
    "fidl/good/fi-0001.test.fidl",
    "fidl/good/fi-0002.test.fidl",
    "fidl/good/fi-0003.test.fidl",
    "fidl/good/fi-0004.test.fidl",
    "fidl/good/fi-0005.test.fidl",
    "fidl/good/fi-0006.test.fidl",
    "fidl/good/fi-0007.test.fidl",
    "fidl/good/fi-0008.test.fidl",
    "fidl/good/fi-0011.test.fidl",
    "fidl/good/fi-0012.test.fidl",
    "fidl/good/fi-0013.test.fidl",
    "fidl/good/fi-0014.test.fidl",
    "fidl/good/fi-0015.test.fidl",
    "fidl/good/fi-0016.test.fidl",
    "fidl/good/fi-0017.test.fidl",
    "fidl/good/fi-0018.test.fidl",
    "fidl/good/fi-0019-a.test.fidl",
    "fidl/good/fi-0019-b.test.fidl",
    "fidl/good/fi-0020.test.fidl",
    "fidl/good/fi-0024.test.fidl",
    "fidl/good/fi-0025.test.fidl",
    "fidl/good/fi-0026.test.fidl",
    "fidl/good/fi-0027-a.test.fidl",
    "fidl/good/fi-0027-b.test.fidl",
    "fidl/good/fi-0028-a.test.fidl",
    "fidl/good/fi-0028-b.test.fidl",
    "fidl/good/fi-0029.test.fidl",
    "fidl/good/fi-0030.test.fidl",
    "fidl/good/fi-0031.test.fidl",
    "fidl/good/fi-0032.test.fidl",
    "fidl/good/fi-0033.test.fidl",
    "fidl/good/fi-0034-a.test.fidl",
    "fidl/good/fi-0034-b.test.fidl",
    "fidl/good/fi-0035.test.fidl",
    "fidl/good/fi-0036.test.fidl",
    "fidl/good/fi-0037.test.fidl",
    "fidl/good/fi-0038-a.test.fidl",
    "fidl/good/fi-0038-b.test.fidl",
    "fidl/good/fi-0038-c.test.fidl",
    "fidl/good/fi-0039-a.test.fidl",
    "fidl/good/fi-0039-b.test.fidl",
    "fidl/good/fi-0039-c.test.fidl",
    "fidl/good/fi-0040-a.test.fidl",
    "fidl/good/fi-0040-b.test.fidl",
    "fidl/good/fi-0046.test.fidl",
    "fidl/good/fi-0047.test.fidl",
    "fidl/good/fi-0048.test.fidl",
    "fidl/good/fi-0050.test.fidl",
    "fidl/good/fi-0057.test.fidl",
    "fidl/good/fi-0058.test.fidl",
    "fidl/good/fi-0059.test.fidl",
    "fidl/good/fi-0065-a.test.fidl",
    "fidl/good/fi-0065-b.test.fidl",
    "fidl/good/fi-0065-c.test.fidl",
    "fidl/good/fi-0066-a.test.fidl",
    "fidl/good/fi-0066-b.test.fidl",
    "fidl/good/fi-0067-a.test.fidl",
    "fidl/good/fi-0067-b.test.fidl",
    "fidl/good/fi-0068-a.test.fidl",
    "fidl/good/fi-0068-b.test.fidl",
    "fidl/good/fi-0069.test.fidl",
    "fidl/good/fi-0070.test.fidl",
    "fidl/good/fi-0071-a.test.fidl",
    "fidl/good/fi-0071-b.test.fidl",
    "fidl/good/fi-0072-a.test.fidl",
    "fidl/good/fi-0072-b.test.fidl",
    "fidl/good/fi-0073.test.fidl",
    "fidl/good/fi-0074.test.fidl",
    "fidl/good/fi-0075.test.fidl",
    "fidl/good/fi-0076.test.fidl",
    "fidl/good/fi-0077-a.test.fidl",
    "fidl/good/fi-0077-b.test.fidl",
    "fidl/good/fi-0084.test.fidl",
    "fidl/good/fi-0093.test.fidl",
    "fidl/good/fi-0100-a.test.fidl",
    "fidl/good/fi-0100-b.test.fidl",
    "fidl/good/fi-0110-a.test.fidl",
    "fidl/good/fi-0110-b.test.fidl",
    "fidl/good/fi-0124.test.fidl",
    "fidl/good/fi-0125.test.fidl",
    "fidl/good/fi-0126.test.fidl",
    "fidl/good/fi-0127.test.fidl",
    "fidl/good/fi-0128.test.fidl",
    "fidl/good/fi-0129-a.test.fidl",
    "fidl/good/fi-0129-b.test.fidl",
    "fidl/good/fi-0130.test.fidl",
    "fidl/good/fi-0131-a.test.fidl",
    "fidl/good/fi-0131-b.test.fidl",
    "fidl/good/fi-0132.test.fidl",
    "fidl/good/fi-0133.test.fidl",
    "fidl/good/fi-0145.test.fidl",
    "fidl/good/fi-0158.test.fidl",
    "fidl/good/fi-0162.test.fidl",
    "fidl/good/fi-0167.test.fidl",
    "fidl/good/fi-0178.test.fidl",
  ]
  outputs = [ "$root_out_dir/fidlc-tests/good/{{source_file_part}}" ]
}

test("fidlc-test") {
  sources = [
    "alias_tests.cc",
    "array_tests.cc",
    "attributes_tests.cc",
    "availability_interleaving_tests.cc",
    "bits_tests.cc",
    "c_generator_tests.cc",
    "canonical_names_tests.cc",
    "coded_types_generator_tests.cc",
    "consts_tests.cc",
    "declaration_order_tests.cc",
    "decomposition_tests.cc",
    "direct_dependencies_tests.cc",
    "enums_tests.cc",
    "errcat_good_tests.cc",
    "errors_tests.cc",
    "flat_ast_tests.cc",
    "flexible_tests.cc",
    "formatter_tests.cc",
    "generated_name_tests.cc",
    "handle_tests.cc",
    "json_diagnostics_tests.cc",
    "json_findings_tests.cc",
    "library_tests.cc",
    "lint_findings_tests.cc",
    "lint_tests.cc",
    "method_tests.cc",
    "new_type_tests.cc",
    "ordinals_tests.cc",
    "parsing_tests.cc",
    "protocol_tests.cc",
    "recoverable_compilation_tests.cc",
    "recoverable_parsing_tests.cc",
    "recursion_detector_tests.cc",
    "reporter_tests.cc",
    "resource_tests.cc",
    "resourceness_tests.cc",
    "service_tests.cc",
    "span_tests.cc",
    "strictness_tests.cc",
    "structs_tests.cc",
    "table_tests.cc",
    "test_library.cc",
    "transport_tests.cc",
    "types_tests.cc",
    "typeshape_tests.cc",
    "union_tests.cc",
    "using_tests.cc",
    "utils_tests.cc",
    "versioning_tests.cc",
    "versioning_types_tests.cc",
    "virtual_source_tests.cc",
    "visitor_unittests.cc",
  ]
  deps = [
    ":bad_cases",
    ":good_cases",
    "//third_party/boringssl",
    "//tools/fidl/fidlc:fidl",
    "//zircon/system/ulib/zxtest",
  ]
}
