source_set("env") {
  configs = []

  # Use relative path to make the build relocatable
  configs += [ "../..:musl_config" ]
  sources = [
    "__environ.c",
    "__reset_tls.c",
    "clearenv.c",
    "getenv.c",
    "putenv.c",
    "setenv.c",
    "unsetenv.c",
  ]
  deps = [
    ":env_no_stack_protector",
  ]
}

source_set("env_no_stack_protector") {
  visibility = [ ":env" ]
  configs = []
  configs += [
    "../../:musl_config",
    "//gnbuild:no_stack_protector",
  ]
  sources = [
    "__init_tls.c",
    "__libc_start_main.c",
    "__stack_chk_fail.c",
  ]
}
