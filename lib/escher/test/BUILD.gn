# Copyright 2016 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//lib/escher/vulkan.gni")

if (is_linux) {
  executable("escher_unittests") {
    testonly = true

    defines = [ "VULKAN_HPP_NO_EXCEPTIONS" ]

    sources = [
      "run_all_unittests.cc",
      "impl/glsl_compiler_unittest.cc",
      "impl/pipeline_cache_unittest.cc"
    ]

    deps = [
      "//lib/escher/escher",
      "//third_party/gtest"
    ]

    libs = [
      "glslang",
      "glslang-default-resource-limits",
      "HLSL",
      "OGLCompiler",
      "OSDependent",
      "pthread",
      "SPIRV",
      "vulkan",
    ]

    lib_dirs = [
      "$vulkan_sdk/lib",
      "$vulkan_sdk/lib/glslang",
    ]

    include_dirs = [
      "//lib",
      "//lib/escher",
      "$glslang_compiler_src",
      "$vulkan_sdk/include",
    ]
  }
}
