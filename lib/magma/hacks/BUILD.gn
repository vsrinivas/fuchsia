# Copyright 2016 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//magma/gnbuild/magma.gni")

source_set("libdl_stubs") {
  cflags = [ "-fPIC" ]

  sources = [
    "libdl_stubs.c",
  ]

  deps = [
    "$magma_build_root/src/magma_util",
  ]
}

config("drm_headers_public_config") {
  include_dirs = [
    ".",
    "./drm",
    "$magma_build_root/third_party/libdrm",
  ]

  defines = [ "_GNU_SOURCE" ]
}

source_set("drm_headers_hacks") {
  public_configs = [ ":drm_headers_public_config" ]
  sources = [
    "$magma_build_root/third_party/libdrm/drm.h",
    "$magma_build_root/third_party/libdrm/drm_fourcc.h",
    "$magma_build_root/third_party/libdrm/drm_mode.h",
    "$magma_build_root/third_party/libdrm/i915_drm.h",
    "$magma_build_root/third_party/libdrm/i915_pciids.h",
    "$magma_build_root/third_party/libdrm/intel_aub.h",
    "$magma_build_root/third_party/libdrm/xf86drm.h",
    "libdrm_stubs.c",
  ]

  deps = [
    "$magma_build_root/src/magma_util",
  ]
}
